{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./DonationPopup.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","window","document","config","DOP_config","assign","visits","timeout","text","postponeText","dismissText","color","position","enableAnalytics","cookieTime","baseStyle","buttonStyle","buttonImgStyle","edgeDistance","buttonTarget","buttons","paypal","patreon","links","custom","cookie","JSON","parse","cname","ca","decodeURIComponent","split","length","charAt","substring","indexOf","getCookie","status","time","displayPopup","style","html","replace","imgStyle","el","createElement","elid","id","Date","now","innerHTML","body","appendChild","setCookie","cvalue","exdays","setTime","getTime","expires","toUTCString","clk","clickType","extra","stringify","removeChild","getElementById","ga","ignored"],"mappings":"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","file":"DonationPopup.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","(function (window, document) {\r\n    let config = window.DOP_config || {};\r\n    config = Object.assign({},\r\n        {\r\n            visits: 10,// Number of visits required for the popup to first show up\r\n            timeout: 24,// Timeout for the 'remind later' option in hours\r\n            text: \"Hey there, sorry for the interruption!\\nIt looks like you've visited this site a couple of times - if you like it and want to help keep it running, please consider throwing over a small donation :)\",// Text of the popup\r\n            postponeText: \"Maybe Later\",// Text on the 'remind me later' button\r\n            dismissText: \"Never!\",// Text on the dismiss button\r\n            color: \"#9c9c9c\",// Background color\r\n            position: \"bottom-right\",// Position of the popup\r\n            enableAnalytics: false,// Toggle Google Analytics - will send a custom event on clicks if enabled\r\n            cookieTime: 30,// Cookie expiration time in days\r\n            baseStyle: \"position: fixed; border-radius: 20px; padding: 10px; font-family: Consolas, monospace; max-width: 30vmax;\",\r\n            buttonStyle: \"padding: 2px;\",\r\n            buttonImgStyle: \"max-height: 40px;\",\r\n            edgeDistance: 10,\r\n            buttonTarget: \"_blank\",\r\n            buttons: {\r\n                paypal: \"https://www.paypalobjects.com/digitalassets/c/website/marketing/apac/C2/logos-buttons/optimize/44_Grey_PayPal_Pill_Button.png\",\r\n                patreon: \"https://c5.patreon.com/external/logo/become_a_patron_button.png\"\r\n            },\r\n            links: {\r\n                paypal: \"\",\r\n                patreon: \"\",\r\n                custom: null // can be a function to add custom HTML\r\n            }\r\n        }, config);\r\n    window.DOP_config = config;\r\n\r\n    let cookie = JSON.parse(getCookie(\"DOP_info\") || '[0,0,0]');\r\n    let visits = cookie[0];\r\n    let status = cookie[1];// 0 = pending, 1 = asked, 2 = clicked, 3 = postponed, 4 = dismissed\r\n    let time = cookie[2];\r\n\r\n    // increase visit count right away\r\n    visits++;\r\n\r\n    if (visits > config.visits) {\r\n        if (status === 0 || status === 1) {// display directly if 'pending' or 'asked'\r\n            displayPopup();\r\n        } else if (status === 3 && Date.now() - time > config.timeout * 60 * 60 * 1000) {// if 'postponed', check if the timeout has passed before displaying\r\n            displayPopup();\r\n        }\r\n\r\n        if (status === 0) status = 1;// Set to 'asked' if 'pending'\r\n    }\r\n\r\n    window.DOP_config.clk = function (clickType, extra) {\r\n        status = clickType;\r\n        if (status === 3) {// set timer if 'postponed'\r\n            time = Date.now();\r\n        }\r\n        setCookie(\"DOP_info\", JSON.stringify([visits, status, time]), config.cookieTime);\r\n        document.body.removeChild(document.getElementById(window.DOP_config.elid));\r\n\r\n        if (config.enableAnalytics) {\r\n            try {\r\n                ga(\"send\", \"event\", \"DonationPopup\", status === 2 ? \"clicked\" : status === 3 ? \"postponed\" : \"dismissed\", extra);\r\n            } catch (ignored) {\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    setCookie(\"DOP_info\", JSON.stringify([visits, status, time]), config.cookieTime);\r\n\r\n    function displayPopup() {\r\n        let style = config.baseStyle;\r\n        style += \"background-color: \" + config.color + \";\";\r\n\r\n        switch (config.position) {\r\n            case \"top-left\":\r\n                style += \"top: \" + config.edgeDistance + \"px; left: \" + config.edgeDistance + \"px;\";\r\n                break;\r\n            case \"top-right\":\r\n                style += \"top: \" + config.edgeDistance + \"px; right: \" + config.edgeDistance + \"px;\";\r\n                break;\r\n            case \"bottom-left\":\r\n                style += \"bottom: \" + config.edgeDistance + \"px; left: \" + config.edgeDistance + \"px;\";\r\n                break;\r\n            case \"bottom-right\":\r\n            default:\r\n                style += \"bottom: \" + config.edgeDistance + \"px; right: \" + config.edgeDistance + \"px;\";\r\n        }\r\n\r\n        let html = \"<p>\" + config.text.replace(\"\\n\", \"<br/>\") + \"</p>\";\r\n        html += \"<div>\";\r\n        if (typeof config.links.custom === \"function\") {\r\n            html += config.links.custom(config, cookie) || \"\";\r\n        } else {\r\n            let buttonStyle = config.buttonStyle;\r\n            let imgStyle = config.buttonImgStyle;\r\n            if (config.links.paypal) {\r\n                html += \"<a onclick='DOP_config.clk(2,\\\"paypal\\\")' style='\" + buttonStyle + \"' target='\" + config.buttonTarget + \"' href='\" + config.links.paypal + \"'><img style='\" + imgStyle + \"' alt='PayPal' src='\" + config.buttons.paypal + \"'></a>\";\r\n            }\r\n            if (config.links.patreon) {\r\n                html += \"<a onclick='DOP_config.clk(2,\\\"patreon\\\")' style='\" + buttonStyle + \"' target='\" + config.buttonTarget + \"' href='\" + config.links.patreon + \"'><img style='\" + imgStyle + \"' alt='Patreon' src='\" + config.buttons.patreon + \"'></a>\";\r\n            }\r\n        }\r\n        html += \"</div><div style='float: right;'>\";\r\n        html += \"<a href='#' onclick='DOP_config.clk(3)'>\" + config.postponeText + \"</a>&nbsp;&nbsp;<a href='#' onclick='DOP_config.clk(4)'>\" + config.dismissText + \"</a>\";\r\n        html += \"</div>\";\r\n\r\n\r\n        let el = document.createElement(\"div\");\r\n        window.DOP_config.elid = el.id = \"DOP\" + Date.now();\r\n        el.style = style;\r\n        el.innerHTML = html;\r\n        document.body.appendChild(el);\r\n    }\r\n\r\n    // https://www.w3schools.com/js/js_cookies.asp\r\n    function setCookie(cname, cvalue, exdays) {\r\n        let d = new Date();\r\n        d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\r\n        let expires = \"expires=\" + d.toUTCString();\r\n        document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\r\n    }\r\n\r\n    // https://www.w3schools.com/js/js_cookies.asp\r\n    function getCookie(cname) {\r\n        let name = cname + \"=\";\r\n        let decodedCookie = decodeURIComponent(document.cookie);\r\n        let ca = decodedCookie.split(';');\r\n        for (let i = 0; i < ca.length; i++) {\r\n            let c = ca[i];\r\n            while (c.charAt(0) == ' ') {\r\n                c = c.substring(1);\r\n            }\r\n            if (c.indexOf(name) == 0) {\r\n                return c.substring(name.length, c.length);\r\n            }\r\n        }\r\n        return \"\";\r\n    }\r\n})(window, document);"],"sourceRoot":""}